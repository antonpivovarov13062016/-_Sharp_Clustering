Описание метода «классической декомпозиции временного ряда» реализованного в программном обеспечении для расчета и анализа сезонной компоненты временного ряда

Описание временного ряда и его компонент

Собранные за равные промежутки времени статистические можно исследовать как временный ряд (динамический ряд) – упорядоченную последовательность значений показателей, характеризующих изменение изучаемого явления во времени. 
Каждый уровень временного ряда Y_tвключает в себя следующие две основные компоненты: регулярную R_t и случайную ?_t, формула (2):  
Y_t=R_t+?_t						 (2)
Регулярная компонента R_t, в свою очередь, состоит из тренда ?Tr?_t, циклической компоненты ?Ci?_t, и сезонности S_t. Отметим, что в модели временного ряда необязательно наличие каждой из вышеуказанных компонент, так циклическая компонента, по сравнению с сезонностью может иметь более длительный эффект, в связи с чем, ее как правило ее объединяют с трендом. 
Тренд ?Tr?_tформируется под влиянием комплексного воздействия различных социально-экономических факторов, влияние которых надинамику изучаемого явления носит долговременный характер. Совокупное воздействие этих факторов формирует тенденцию. Тенденция может быть возрастающей или убывающей.
Предметом проводимого нами анализа временного ряда является сезонная составляющая S_t, которая отражает закономерности в динамике исследуемого явления повторяющиеся в течение заданного периода (например, год или квартал).
По влиянию компонент временного ряда на его уровень различают: аддитивную модель временного ряда, когда имеется предположение, что влияние компонент на уровень временного ряда носит аддитивный характер, формула (3); и мультипликативную модель временного ряда, когда имеется предположение о мультипликативном характере воздействия компонентов, формула (4):
Y_t=?Tr?_t+S_t+?_t, 					(3)
Y_t=?Tr?_t?S_t??_t, 					(4)
где:Y_t – уровень временного ряда в момент времени t;
?Tr?_t – тренд временного ряда в момент времени t;
S_t – сезонная составляющая временного ряда в момент времени t;
?_t –случайные отклонения временного ряда в момент времени t.
Первоначальный выбор в пользу модели временного ряда осуществляется на основании визуальной оценки динамики ряда. 
Если колебания значений временного ряда имеют относительно постоянную амплитуду, предпочтительнее использовать аддитивную модель (рисунок 1, амплитуда колебаний временного ряда постоянная), при изменяющейся амплитуде колебаний во времени используют мультипликативную модель (рисунок 2, амплитуда колебаний временного ряда увеличивается вместе с тенденцией).

 
Рис. 1. Динамика временного ряда, описываемая аддитивной моделью

 
Рис. 2. Динамика временного ряда, описываемая мультипликативной моделью

Описание метода «классической декомпозиции временного ряда» («CensusI»)

Одним из методов определения сезонности исследуемых явлений, учитывающих структуру временного ряда, является эвристический метод декомпозиции временного ряда «CensusI», также известный как метод классической декомпозиции (далее - метод «CensusI») получивший распространение в экономике, в США, в 80-х годах. 
Метод «CensusI», предназначенный для декомпозиции временного ряда на рассмотренные выше компоненты (тренд, сезонную компоненту, случайную составляющую), и построения с их учетом прогноза, может найти применение при анализе преступности, определении ее сезонных колебаний.
В основе метода «CensusI» лежит метод простой «скользящей средней» (SimpleMovingAverage, далее - SMA), предназначенный для выравнивания значений временного ряда, т.е. нахождения средних уровней временного ряда за определенные периоды времени путем последовательного передвижения изучаемого периода. Такая процедура позволяет заменить фактические уровни ряда расчетными сглаженными, которые в меньшей степени подвержены различным колебаниям.
Недостатки метода «CensusI»: «укорачивание» ряда на период сглаживания, что влияет на результаты расчета при небольшой длине ряда; чувствительность к выбросам в исследуемом временном ряде (например, значительный и нехарактерный уровень социально-экономического в определенном месяце).
Достоинства метода «CensusI»: возможность декомпозиции временного ряда на компоненты; соотношение между его точностью и простотой реализации, относительно других более точных математических методов с более сложной методикой расчета показателей; универсальность метода, выражающаяся в отсутствии необходимости дополнительных преобразований временного ряда (например, приведения его к стационарности); возможность реализации метода как стандартными компьютерными программами – табличными процессорами (например, MicrosoftExcel, OpenOffice и другими), так и специализированными программными пакетами,предназначенными для статистической обработки данных (например, IBMSPSSStatistics, Statistica и другими).

На первом этапе определяются значения сглаженного временного ряда методом SMA (12) (в скобках указывается длина сглаживаемого периода). Этот позволяет исключить из временного ряда его сезонную составляющую и случайные отклонения, оставив в основании ряда трендовую компоненту.
В общем виде скользящая средняя определяется как среднее арифметическое середины периода, в случае если период сглаживания нечетное число, по формуле (5):
?SMA(n)=?y?_(t,n)= (?_(j=t+1)^(t+n)-y_j )/n , 					(5)
где: 	?y_(t,n) – сглаженное значение уровня ряда в момент времени t;
y_j – эмпирическое значение временного ряда в момент времени j;
n – длина периода сглаживания. 
Для периода сглаживания равного четному числу, как в нашем случае равным - 12 (по числу месяцев), применяется формула (6), с весами первого и последнего периода в скользящем периоде равным 0,5, преобразованная из формулы (5):
?y_(t,12)= (1/2?y_(t-6)+y_(t-5)+?+y_t+?+y_(t+5)+1/2?y_(t+6))/12, 				(6)
Рассчитанное сглаженное значение уровня ряда в момент времени t считается соответствующим трендовой компоненте (?Tr?_t ) ?, описываемой функцией f(t).
Имея фактические значения уровня ряда и рассчитанные значения трендовой компоненты, можно рассчитать соответствующие сезонные компоненты для каждого сглаженного уровня ряда в момент времени t, по формуле (7.1) для аддитивной модели, по формуле (7.2) для мультипликативной модели:
?S_t=Y?_t- (?Tr?_t ) ?, 					(7.1)
S_t= Y_t/(?Tr?_t ) ? ,						(7.2)
Полученные компоненты содержат в себе и случайные отклонения ?_t. Для того чтобы их убрать, рассчитывают среднее значение сезонной компоненты S_j за каждый период по формуле (8.1) для аддитивной модели и для мультипликативной модели: 
S_j=1/N ?_(i=1)^n-S_(j+l•i) ,				 (8)
где: S_j – усредненная сезонная компонента за период j;
j – номер сезонной компоненты в периоде, в нашем случае номер месяца;
	l – лаг сезонности (в нашем случае равен - 12).
После расчета усредненных значений S_j они корректируются (нормализуются), так чтобы не вносить помехи в трендовую компоненту:
Для аддитивной модели – так, чтобы в сумме давать 0, путем центрирования относительно средней арифметической полученных lсезонных компонент, по формуле (9.1):
?S'?_j=  S_j-S ?, где S ?= 1/l ?_(j=1)^l-?S ?_j 			(9.1)
Существует несколько подходов к получению значений сезонных компонент для мультипликативной модели. 
	«Классический метод», срасчетом по формуле (9.2):		
?S'?_j=  S_j-l/(?_(j=1)^l-?S ?_j ).					(9.2)
Некоторым известным и реализованным в ряде специализированных программных пакетов, предназначенных для статистической обработки данных (например в IBMSPSSStatistics), подходом к совершенствованию данного метода– является применение в формуле (8) при расчете S_j, вместо средней арифметической – средней усеченной (урезанной) (англ. «thetrimmedmean») , которая позволяет исключить возможные выбросы из ряда данных (p% наибольших и наименьших значений), рассчитываемой по формуле (10):
x ?=(?_(i=p+1)^(n-p)-x_i )/(n-2p),						(10)
где: x ? – усеченное среднее;
n – количество элементов в выборке;
p – процент усечения выборки, как правило устанавливается в диапазоне от 5% до 25%, (в программном обеспечении реализовано изменение в доля целого).

	«Вариант метода», описанный в ряде источников, например (Светуньков И. С., Светуньков С. Г. Методы и модели социально-экономического прогнозирования М: Юрайт, 2014. 447 c.)при котором сезонные компоненты, сначала рассчитываются по формуле (11), а затем корректируются, по формуле (12):		
S_j=v(n&?_(i=1)^n-S_(j+l•i) ),					(11)
?S^'?_j= S_j/S ? , где S ?=v(l&?_(j=1)^l-?S ?_j )				(12)
Полученные по формулам (9.1, 9.2, 12) значения скорректированных сезонных компонент ?S^'?_j можно рассматривать как сезонные коэффициенты.
Имея фактические значения уровня ряда и значения скорректированных сезонных компонент, по формуле (3 или 4, в зависимости от модели временного ряда) возможноопределить значения уровней сезонно скорректированного ряда и провести в соответствии с его значениями аналитическое выравнивание временного ряда, т.е. определить уравнение тренда. 
По полученным выше значениям компонент временного ряда, в соответствии с его моделью вычисляют прогнозные значения уровней временного ряда.

